<ng-container
    *ngIf="{
        week: currentWeekStart$ | async,
        data: currentWeekData$ | async,
        hoursPerDay: hoursPerDay$ | async,
        workStartDate: workStartDate$ | async,
        totalWorkHoursDiff: totalWorkHoursDiff$ | async
    } as vm"
>
    <div class="week-selector">
        <button (click)="nextWeek(-1)" data-color="primary"><i class="fa-solid fa-arrow-left"></i></button>
        <span
            >Week <strong>{{ vm.week | date : 'ww, y' }}</strong></span
        >
        <button (click)="nextWeek(1)" data-color="primary"><i class="fa-solid fa-arrow-right"></i></button>
        <button (click)="goToThisWeek()" data-color="primary"><i class="fa-solid fa-calendar-week"></i></button>
    </div>

    <div class="week">
        <app-week-day-card
            *ngFor="let day of weekDays"
            [weekStart]="vm.week!"
            [weekDay]="day"
            [workEntry]="vm.data?.entries?.[day] || null"
        ></app-week-day-card>
    </div>

    <section class="summary">
        <h2>Summary</h2>

        <div class="total-work-diff">
            <span>Total work hours diff</span>
            <span [class.reached]="(vm.totalWorkHoursDiff || 0) >= 0">{{ vm.totalWorkHoursDiff | hours : true }}</span>
        </div>

        <label>
            Work hours per day
            <input type="time" [value]="vm.hoursPerDay | hours" />
        </label>

        <label>
            Work start date
            <input
                type="date"
                [value]="vm.workStartDate"
                (change)="setWorkStartDate(workStartDateInput.value)"
                #workStartDateInput
            />
        </label>
    </section>
</ng-container>
